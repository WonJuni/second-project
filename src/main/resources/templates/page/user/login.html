<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>Login</title>
	<!--    <link rel="stylesheet" type="text/css" href="styles.css" />-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous" />
	<link
		href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Noto+Sans+KR:wght@200;300;400;500;600;700;800&display=swap"
		rel="stylesheet" />
	<style>
		* {
			font-family: 'Noto Sans KR', sans-serif;
		}

		body {
			scale: 150%;
			display: flex;
			justify-content: center;
			align-items: center;
			height: 80vh;
			overflow: hidden;
			/* 오버플로우를 숨겨 불필요한 스크롤바 제거 */
		}

		#main {
			text-align: center;
			margin-top: 5rem;
		}

		.logo {
			margin-bottom: 1.2rem;
		}

		.signUp {
			font-size: 10px;
			margin-top: 10px;
			color: #b8b8b8;
			/* 텍스트 색을 회색으로 설정합니다 */
		}

		.signUp a {
			color: #111;
			/* 링크 색을 검정색으로 설정합니다 */
			text-decoration: none;
			/* 링크의 밑줄을 제거합니다 */

			font-weight: 600;
			/* 로그인 버튼의 폰트 굵기를 설정합니다 */
		}

		input[type='text'] {
			border-radius: 10px;
			padding: 8px;
			margin-bottom: 10px;
			font-size: 10px;
			border: 1.5px solid black;
			width: 200px;
		}

		input[type='password'] {
			border-radius: 10px;
			padding: 8px;
			margin-bottom: 1.5rem;
			font-size: 10px;
			border: 1.5px solid black;
			width: 200px;
		}

		.btn {
			font-size: 10px;
			margin-bottom: 0.5rem;
		}

		.error-message {
			color: red;
			font-size: 12px;
			margin-top: 5px;
		}
	</style>
	   <script>
        // JavaScript function to validate the form
        function validateForm() {
            // Get values from the form
            var uiId = document.getElementById('uiId').value;
            var uiPwd = document.getElementById('uiPwd').value;

            // Your validation logic here
            // For example, you can check if the username and password are correct
            if (uiId !== "correctUsername" || uiPwd !== "correctPassword") {
                // Display an error message
                document.getElementById('error-message').innerText = '아이디 또는 비밀번호가 일치하지 않습니다.';
                return false; // Prevent form submission
            }

            // If validation passes, allow form submission
            return true;
        }
    </script>
</head>

<body>
	<div id="main">
		<div class="logo">
			<h3 style="font-size: 14px; font-weight: 700">Match Me If You Can</h3>
		</div>
		<div>
			<form method="post" action="/login" onsubmit="return validateForm(); ">

				<input type="text" id="uiId" name="uiId" placeholder="아이디" /><br />
				<input type="password" id="uiPwd" name="uiPwd" placeholder="비밀번호" /><br />
				<button class="btn btn-dark" style="width: 200px; border-radius: 10px">
					로그인
				</button>
				<div id="error-message" class="error-message"></div>
			</form>
		</div>
		<div class="signUp">
			<span>계정이 없으신가요? <a href="/page/user/join">회원가입</a></span>
		</div>
	
	<script>
		async function validateForm() {
			var uiId = document.getElementById('uiId').value;
			var uiPwd = document.getElementById('uiPwd').value;
			var errorMessage = document.getElementById('error-message');

			if (uiId === '' || uiPwd === '') {
				errorMessage.innerText = '아이디나 비밀번호를 확인해주세요.';
				return false;
			}

				const response = await fetch('/login', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({
						uiId: uiId,
						uiPwd: uiPwd
					}),
				});

				const data = await response.json();

				if (data.success) {
					errorMessage.innerText = '';
				} else {
					errorMessage.innerText = '아이디나 비밀번호가 일치하지 않습니다. 다시 확인해주세요.';
					return false;
				}
			} 
		

	</script>
	
</body>

</html>