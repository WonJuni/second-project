<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>전적</title>
    <link href="/css/team/record.css" rel="stylesheet"/>
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
            href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Noto+Sans+KR:wght@200;300;400;500;600;700;800&display=swap"
            rel="stylesheet"
    />
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
            integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
            crossorigin="anonymous"
    />
    <script
            src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"
    ></script>
    <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
            crossorigin="anonymous"
    ></script>
</head>
<body>
<!-- 사이드바 영역 -->
<div th:replace="/page/fragment/side-bar.html :: f-side-bar"></div>


<div th:replace="/page/fragment/header.html :: f-head"></div>

<div
        class="modal fade"
        id="scoreModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="scoreModalLabel"
        aria-hidden="true"
>
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6
                        class="modal-title"
                        id="scoreModalLabel"
                        style="text-align: center"
                >
                    오늘 경기 정보를 입력해주세요!
                </h6>
                <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                >
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-title-score">
                    <label for="scoreInput"><h5>스코어</h5></label>
                </div>

                <div
                        class="modal-score"
                        style="display: flex; justify-content: space-evenly"
                >
                    <div class="score-board">
                        <input
                                type="number"
                                id="homeScoreInput"
                                style="
                    width: 80px;
                    height: 100px;
                    text-align: center;
                    font-size: 32px;
                  "
                        /><br/>
                        <label for="homeScoreInput">Home</label>
                    </div>
                    <label style="font-size: 32px; margin-top: 1.2rem">:</label>
                    <div class="score-board">
                        <input
                                type="number"
                                id="awayScoreInput"
                                style="
                    width: 80px;
                    height: 100px;
                    text-align: center;
                    font-size: 32px;
                  "
                        />
                        <br/>
                        <label for="awayScoreInput">Away</label>
                    </div>
                </div>

                <div class="emoji-container">
                    <button class="emoji-option" id="emoji-sad">😟</button>
                    <button class="emoji-option" id="emoji-happy">😀</button>
                    <button class="emoji-option" id="emoji-excited">🤩</button>
                </div>
            </div>
            <div class="modal-footer">
                <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                >
                    취소
                </button>
                <button
                        type="button"
                        class="btn btn-primary"
                        id="confirmButton"
                        onclick="saveMatchResult()"
                >
                    저장
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 팀 프로필 영역 -->
<div th:replace="/page/fragment/team-profile.html :: f-team-profile"></div>

<ol class="custom-table" id="match-list"></ol>
<div class="record-table-section">
    <button
            id="register-application-btn"
            data-toggle="modal"
            data-target="#membershipModal"
    >
        가입신청
    </button>
</div>

<!-- 가입 신청 모달 -->
<div
        class="modal fade"
        id="membershipModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="membershipModalLabel"
        aria-hidden="true"
>
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="membershipModalLabel">가입 신청</h5>
                <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                >
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>
                    "<span id="team-name-modal" style="font-weight: bold"></span>"에
                    가입 신청을 하시겠습니까?
                </p>
            </div>
            <div class="modal-footer">
                <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                >
                    취소
                </button>
                <button
                        type="button"
                        class="btn btn-primary"
                        id="confirmMembershipBtn"
                        onclick="doSendObj()"
                >
                    확인
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 부트스트랩 Pagination -->
<div class="pagination-class" style="margin-top: 5rem; margin-bottom: 3rem">
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li class="page-item">
                <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">4</a></li>
            <li class="page-item"><a class="page-link" href="#">5</a></li>
            <li class="page-item">
                <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>
<!-- IONICONS -->
<script src="https://unpkg.com/ionicons@5.2.3/dist/ionicons.js"></script>

<script>
	async function doSendObj(){
		//타임리프 안돼서 일단 ㅠㅠ
		const urlParams = new URL(location.href).searchParams;
		const taNum = urlParams.get('taNum');
		const obj = {
			taNum: taNum
		} 
		const res = await fetch('/team-sign-user-add',{
			method: 'POST',
			body: JSON.stringify(obj),
			headers: {
					'Content-Type': 'application/json;charset=UTF-8'
				}
		});
		const result = await res.json();
		console.log(result);
		if(result == 1){
			alert("가입 성공!");
		}else{
			alert("이미 신청한 팀 입니다");
		}
	}
</script>

<script src="/js/team/record-script.js"></script>
</body>
</html>
